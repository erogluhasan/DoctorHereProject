<?xml version="1.1" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.10.xsd">
    <changeSet author="hasan.eroglu" id="DH-20 2023-03-21 14:00" context="sql">
        <sql splitStatements="true">

            create table  if not exists dh_appointment
            (
                id   bigint not null generated by default as identity (start with 1) constraint pk_appointment  primary key,
                created_by         varchar(255),
                created_date       timestamp,
                last_modified_date timestamp,
                last_modified_by   varchar(255),
                deleted            boolean default false,
                version            numeric default 0 not null,
                doctor_id        bigint not null,
                patient_id        bigint not null,
                appointment_time       timestamp,
                status varchar(255),
                note varchar(2555),
                cancel_time       timestamp,
                cancel_reason varchar(255),
                fee numeric,
                cost  numeric,
                appointment_type varchar(255)
            );

            ALTER TABLE dh_appointment ADD CONSTRAINT fk_appointment_doctor_id FOREIGN KEY (doctor_id) REFERENCES dh_doctor(id);
            ALTER TABLE dh_appointment ADD CONSTRAINT fk_appointment_patient_id FOREIGN KEY (patient_id) REFERENCES dh_patient(id);



        </sql>
    </changeSet>


</databaseChangeLog>